/*
 * jQuery Pines Steps (psteps) Plugin 0.0.1alpha
 *
 * http://pinesframework.org/psteps/
 * Copyright (c) 2012 Angela Murrell
 *
 * Triple license under the GPL, LGPL, and MPL:
 *	  http://www.gnu.org/licenses/gpl.html
 *	  http://www.gnu.org/licenses/lgpl.html
 *	  http://www.mozilla.org/MPL/MPL-1.1.html
 */
(function(e){e.fn.psteps=function(t){var n=e.extend({},e.fn.psteps.defaults,t);var r=this;r.each(function(){var t=e(this);t.psteps_version="0.0.1alpha";if(t.hasClass("steps-transformed"))return true;t.addClass("steps-transformed");t.opts=n;var r=t.find(".step-content"),i=t.find(".step-title"),s=t.find(".step-name"),o=t.find(".next-button"),u=t.find(".back-button"),a=t.find(".submit-button"),f=t.find(".next-button, .submit-button"),l=t.find(".step-title").length,c=true;t.get_max_height=function(t){var n=-1;t.each(function(){var t=e(this).height();n=t>n?t:n});return n};if(!n.step_order)t.find(".step-order").hide();t.make_step_content_headings=function(){t.find(".step-title").each(function(r){var i=e(this).find(".step-name"),s=t.find(".step-content").eq(r);if(i.length==1){var o=n.content_headings_hr?"<hr/>":"",u='<div class="step-content-name"><'+n.content_headings_element+">"+i.html()+"</"+n.content_headings_element+">"+o+"</div>";if(n.content_headings_after!=false&&s.find(n.content_headings_after).length>0)s.find(n.content_headings_after).after(u);else s.prepend(u)}})};if(n.content_height_equalize||n.steps_height_equalize||n.steps_width_percentage||n.shrink_step_names){if(n.steps_height_equalize){var h=t.find(".step-title"),p=t.get_max_height(h)}if(n.content_height_equalize){var d=t.find(".step-content");d.addClass("clearfix");var v=t.get_max_height(d)}e(window).resize(function(){if(n.steps_width_percentage){var r=100/l-1;if(e(window).width()<parseInt(n.alter_width_at_viewport))t.find(".step-title").css({width:r+"%","padding-left":"0","padding-right":"0"})}if(n.shrink_step_names){if(e(window).width()<=parseInt(n.alter_names_at_viewport)){setTimeout(function(){t.find(".step-content-name").remove();t.find(".step-name").hide();t.find(".step-order").show();t.make_step_content_headings()},200)}else{setTimeout(function(){t.find(".step-content-name").remove();if(!n.step_order)t.find(".step-order").hide();if(n.step_names)t.find(".step-name").show();if(n.content_headings)t.make_step_content_headings()},200)}}if(n.steps_height_equalize){var i=t.find(".step-title");i.css("min-height",p);i.css("min-height",t.get_max_height(i))}if(n.content_height_equalize){setTimeout(function(){var e=t.find(".step-content");e.css("min-height",v);e.css("min-height",t.get_max_height(e))},2e3)}}).resize()}t.check_progress_titles=function(){t.find(".step-content").each(function(r){var i=e(this),s="pstep"+(r+1);i.addClass(s);var o=t.find(".step-title").eq(r);o.addClass(s);var u;if(n.traverse_titles=="visited"&&o.hasClass("step-visited")||n.traverse_titles=="custom"&&o.hasClass("step-visited")||n.traverse_titles=="never"&&o.hasClass("step-visited")||n.traverse_titles=="always"){u=n.validation_rule.call(i);if(u=="warning"){o.removeClass("step-error btn-info btn-success btn-warning btn-danger step-info-error step-info-incomplete").addClass("step-warning step-info-warning");t.trigger_error(i)}else if(u=="error"){o.removeClass("step-warning btn-info btn-success btn-warning btn-danger step-info-incomplete step-info-warning").addClass("step-error step-info-error");t.trigger_error(i)}else if(u){o.removeClass("step-warning btn-info btn-warning btn-danger step-error step-info-error step-info-incomplete step-info-warning").addClass("btn-success");if(n.check_marks)o.find("i.step-mark").remove().end().prepend('<i class="icon-ok step-mark"></i> ')}else if(!u){o.removeClass("step-warning btn-info btn-success btn-danger btn-warning step-error step-info-error step-info-warning").addClass("btn-info step-info-incomplete").find("i.step-mark").remove()}}else{u=n.validation_rule.call(i);if(u=="warning"){o.removeClass("step-info-incomplete step-info-error").addClass("step-info-warning")}else if(u=="error"){o.removeClass("step-info-incomplete step-info-warning").addClass("step-info-error");t.trigger_error(i)}else if(u){o.removeClass("step-info-error step-info-incomplete step-info-warning")}else if(!u){o.removeClass("step-info-error step-info-warning").addClass("step-info-incomplete")}}});t.toggle_buttons_function();t.trigger("validation_complete.psteps")};t.toggle_buttons_function=function(){var e=o.attr("data-btn-name"),r=a.attr("data-btn-name"),s=u.attr("data-btn-name");if(e!=undefined&&e.length)o.html(e);if(r!=undefined&&r.length)a.html(r);if(s!=undefined&&s.length)u.html(s);if(t.find(".step-content").last().hasClass("step-active")){if(!o.hasClass("btn-manual"))o.hide();if(!a.hasClass("btn-manual"))a.show()}else{if(!o.hasClass("btn-manual"))o.show();if(!a.hasClass("btn-manual"))a.hide()}var l=t.find(".step-title.step-active");if(l.hasClass("btn-success")||l.hasClass("step-warning"))f.removeClass("btn-info").addClass("btn-success");else if(l.hasClass("btn-info"))f.removeClass("btn-success").addClass("btn-info");else if(l.hasClass("step-error"))f.removeClass("btn-success btn-info").addClass("btn-danger");if(n.validate_submit_all_steps){if(i.filter(".btn-info").length||i.filter(".step-error").length&&!n.ignore_errors_on_submit)a.removeClass("btn-success").addClass("btn-info")}if(n.back&&!u.hasClass("btn-manual")){if(t.find(".step-title").first().hasClass("step-active"))u.hide();else{var c=t.find(".step-title.step-active").prevAll(".step-title:first");if(c.hasClass("btn-info"))u.removeClass("btn-success btn-warning btn-danger").addClass("btn-info").css("cursor","pointer");else if(c.hasClass("btn-success"))u.removeClass("btn-info btn-warning btn-danger").addClass("btn-success").css("cursor","pointer");else if(c.hasClass("btn-warning"))u.removeClass("btn-info btn-success btn-danger").addClass("btn-warning").css("cursor","pointer");else if(c.hasClass("btn-danger"))u.removeClass("btn-success btn-warning btn-info").addClass("btn-danger").css("cursor","pointer");u.show()}}else if(!u.hasClass("btn-manual"))u.hide()};t.go_to_step=function(e){var r=t.find(".step-title.last-active"),i=t.find(".step-content.last-active"),s=t.find(".step-content.step-active"),o=t.find(".step-title.step-active");if(e>l)return;var u=t.find(".step-content").eq(e-1),a=t.find(".step-title").eq(e-1);if(t.find(".step-resume").length){t.find(".step-transition-processing").removeClass("step-transition-processing")}if(o.hasClass("step-transition")&&!t.find(".step-resume").length&&!c)n.steps_transition.call(s);if(o.hasClass("step-transition-processing")){t.find(".step-resume").removeClass("step-resume");a.addClass("step-resume");return}else t.find(".step-resume").removeClass("step-resume");if(!c)n.steps_hide.call(s);r.removeClass("last-active");i.removeClass("last-active");s.hide().removeClass("step-active").addClass("last-active");u.show().addClass("step-active step-visited");o.removeClass("step-active").addClass("disabled last-active");a.addClass("step-active step-visited").removeClass("disabled");u.prevAll(".step-content").addClass("step-visited");a.prevAll(".step-title").addClass("step-visited");if(!u.hasClass("step-loaded"))n.steps_onload.call(u);u.addClass("step-loaded");n.steps_show.call(u);if(n.traverse_titles=="visited"){a.prevAll(".step-title").andSelf().css("cursor","pointer")}if(c)c=false;else t.trigger("validate.psteps");t.toggle_buttons_function()};t.go_to_next_step=function(){var e=t.find(".step-title.step-active").prevAll(".step-title");if(n.skip_no_traverse_on_next){var r=t.find(".step-title").eq(e.length+1);if(r.hasClass("step-notraverse")){var i=r.nextAll(".step-title:not(.step-notraverse)").first().prevAll(".step-title").length+1;t.go_to_step(i)}else t.go_to_step(e.length+2)}else t.go_to_step(e.length+2)};t.go_to_prev_step=function(){var e=t.find(".step-title.step-active").prevAll(".step-title");if(n.skip_no_traverse_on_next){var r=t.find(".step-title").eq(e.length-1);if(r.hasClass("step-notraverse")){var i=r.prevAll(".step-title:not(.step-notraverse)").first().prevAll(".step-title").length+1;t.go_to_step(i)}else{t.go_to_step(e.length)}}else{t.go_to_step(e.length)}};t.change_traverse=function(r){var i=n.custom_traverse_class;var s=t.find(".step-title");t.off("click",".step-title:not(.step-notraverse)");t.off("click",".step-title.step-active:not(.step-notraverse)");t.off("click",".step-title.step-visited:not(.step-notraverse)");if(r=="always"){s.css("cursor","pointer");t.on("click",".step-title:not(.step-notraverse)",function(){var n=e(this),r=n.prevAll(".step-title");t.go_to_step(r.length+1)})}else if(r=="custom"){var o="."+i;var u=".step-title."+i+":not(.step-notraverse)";s.css("cursor","default").filter(o).css("cursor","pointer");t.on("click",u,function(){var n=e(this);if(n.prevAll(".step-title:first").hasClass("step-active"))t.go_to_next_step();else if(n.nextAll(".step-title:first").hasClass("step-active"))t.go_to_prev_step();else{var r=n.prevAll(".step-title");t.go_to_step(r.length+1)}})}else if(r=="visited"){s.css("cursor","default").filter(".step-visited").css("cursor","pointer");t.on("click",".step-title.step-visited:not(.step-notraverse)",function(){var n=e(this);if(n.prevAll(".step-title:first").hasClass("step-active"))t.go_to_next_step();else if(n.nextAll(".step-title:first").hasClass("step-active"))t.go_to_prev_step();else{var r=n.prevAll(".step-title");t.go_to_step(r.length+1)}})}else if(r=="never"){s.css("cursor","default");t.on("click",".step-title.step-active:not(.step-notraverse)",function(){var n=e(this),r=n.prevAll(".step-title");t.go_to_step(r.length+1)})}s.filter(".step-notraverse").css("cursor","default")};t.trigger_error=function(e){var r=e.prevAll(".step-content").length+1,i=t.find(".step-title").eq(r-1);if(i.hasClass("step-warning")){i.removeClass("btn-info btn-success").addClass("btn-warning");if(n.check_marks)i.find("i.step-mark").remove().end().prepend('<i class="icon-remove step-mark"></i> ')}else if(i.hasClass("step-error")){i.removeClass("btn-info btn-success").addClass("btn-danger");if(n.check_marks)i.find("i.step-mark").remove().end().prepend('<i class="icon-remove step-mark"></i> ')}};r.hide().first().addClass("step-visited step-active").show();i.addClass("disabled btn").first().addClass("step-visited step-active").removeClass("disabled");if(!n.step_names)s.hide();t.change_traverse(n.traverse_titles);t.check_progress_titles();if(n.content_headings)t.make_step_content_headings();var m;if(n.start_incomplete_step){var g=t.find(".step-title.step-info-incomplete").first();if(g.length)t.go_to_step(g.prevAll(".step-title").length+1);else{m=t.find(".step-title.btn-success").last();t.go_to_step(m.prevAll(".step-title").length+1)}}else if(n.start_warning_step){var y=t.find(".step-title.step-info-warning").first();if(y.length)t.go_to_step(y.prevAll(".step-title").length+1);else{m=t.find(".step-title.btn-success").last();t.go_to_step(m.prevAll(".step-title").length+1)}}else if(n.start_error_step){var b=t.find(".step-title.step-info-error").first();if(b.length)t.go_to_step(b.prevAll(".step-title").length+1);else{m=t.find(".step-title.btn-success").last();t.go_to_step(m.prevAll(".step-title").length+1)}}else t.go_to_step(n.step_start);u.click(function(){if(n.use_custom_back_button){var e=t.find(".step-title.step-active").prevAll(".step-title").length;n.custom_back_button_click.call(undefined,e)}else{t.go_to_prev_step()}});var w=0;t.bind("validate.psteps",function(e){if(e.timeStamp<w+500){e.preventDefault();e.stopPropagation();return}w=e.timeStamp;t.check_progress_titles()});t.bind("traverse_never.psteps",function(){t.change_traverse("never")});t.bind("traverse_always.psteps",function(){t.change_traverse("always")});t.bind("traverse_visited.psteps",function(){t.change_traverse("visited")});t.bind("traverse_custom.psteps",function(){t.change_traverse("custom")});t.bind("load_after_steps.psteps",function(){n.load_after_steps.call(t)});t.on("step_error.psteps",".step-content",function(){t.trigger_error(e(this))});t.on("go_to_step.psteps",".step-title",function(){var n=e(this),r=n.prevAll(".step-title");t.go_to_step(r.length+1)});t.bind("go_to_first_incomplete.psteps",function(){var e=t.find(".step-title.step-info-incomplete").first();if(e.length)t.go_to_step(e.prevAll(".step-title").length+1);else{m=t.find(".step-title.btn-success").last();t.go_to_step(m.prevAll(".step-title").length+1)}});t.bind("go_to_first_warning.psteps",function(){var e=t.find(".step-title.step-info-warning").first();if(e.length)t.go_to_step(e.prevAll(".step-title").length+1);else{m=t.find(".step-title.btn-success").last();t.go_to_step(m.prevAll(".step-title").length+1)}});t.bind("go_to_first_error.psteps",function(){var e=t.find(".step-title.step-info-error").first();if(e.length)t.go_to_step(e.prevAll(".step-title").length+1);else{m=t.find(".step-title.btn-success").last();t.go_to_step(m.prevAll(".step-title").length+1)}});f.click(function(r){var i=e(this);if(i.hasClass(n.btn_wait_class)){setTimeout(function(){t.trigger("validate.psteps");var s=t.find(".step-title.step-active");if(s.hasClass("step-error")&&n.validate_errors&&!n.validate_next_step){if(n.validate_use_error_msg)alert(n.validate_error_msg);else s.click()}else if(s.hasClass("step-error")&&n.validate_next_step&&!n.ignore_errors_on_next)e.noop();else if(s.hasClass("step-error")&&n.ignore_errors_on_next)t.go_to_next_step();else if(i.hasClass("btn-success"))t.go_to_next_step();else if(i.hasClass("submit-button")&&(n.validate_submit_all_steps||n.validate_next_step)){if(n.use_before_submit)alert(n.before_submit);r.preventDefault()}else if(n.validate_next_step&&n.use_before_next)alert(n.before_next);else t.go_to_next_step()},n.btn_wait_time)}else{t.trigger("validate.psteps");var s=t.find(".step-title.step-active");if(s.hasClass("step-error")&&n.validate_errors&&!n.validate_next_step){if(n.validate_use_error_msg)alert(n.validate_error_msg);else s.click()}else if(s.hasClass("step-error")&&n.validate_next_step&&!n.ignore_errors_on_next)e.noop();else if(s.hasClass("step-error")&&n.ignore_errors_on_next)t.go_to_next_step();else if(i.hasClass("btn-success"))t.go_to_next_step();else if(i.hasClass("submit-button")&&(n.validate_submit_all_steps||n.validate_next_step)){if(n.use_before_submit)alert(n.before_submit);r.preventDefault()}else if(n.validate_next_step&&n.use_before_next)alert(n.before_next);else t.go_to_next_step()}});this.pines_steps=t});return r};e.fn.psteps.defaults={traverse_titles:"never",custom_traverse_class:"custom-traverse",skip_no_traverse_on_next:true,content_headings:false,content_headings_element:"h4",content_headings_hr:true,content_headings_after:false,step_order:true,step_names:true,check_marks:true,alter_width_at_viewport:"1000",steps_width_percentage:false,steps_height_equalize:false,content_height_equalize:false,alter_names_at_viewport:"650",shrink_step_names:true,back:true,use_custom_back_button:false,custom_back_button_click:function(){},step_start:"1",steps_onload:function(){},steps_show:function(){},steps_hide:function(){},steps_transition:function(){},start_incomplete_step:false,start_warning_step:false,start_error_step:false,validation_rule:function(){return true},validate_next_step:true,validate_submit_all_steps:true,validate_errors:true,ignore_errors_on_next:false,ignore_errors_on_submit:false,validate_error_msg:"There was an error processing the step.",validate_use_error_msg:true,use_before_submit:true,before_submit:"Please complete all of the required steps before submitting.",use_before_next:true,before_next:"Please complete this step before advancing to the next step.",btn_wait_class:"btn-wait",btn_wait_time:1e3,load_after_steps:function(){}}})(jQuery)
(function(e){e.fn.psteps=function(t){var n=e.extend({},e.fn.psteps.defaults,t);var r=this;r.each(function(){var t=e(this);t.psteps_version="0.0.1alpha";if(t.hasClass("steps-transformed"))return true;t.addClass("steps-transformed");t.opts=n;var r=t.find(".step-content"),i=t.find(".step-title"),s=t.find(".step-name"),o=t.find(".next-button"),u=t.find(".back-button"),a=t.find(".submit-button"),f=t.find(".next-button, .submit-button"),l=t.find(".step-title").length,c=true;t.get_max_height=function(t){var n=-1;t.each(function(){var t=e(this).height();n=t>n?t:n});return n};if(!n.step_order)t.find(".step-order").hide();t.make_step_content_headings=function(){t.find(".step-title").each(function(r){var i=e(this).find(".step-name"),s=t.find(".step-content").eq(r);if(i.length==1){var o=n.content_headings_hr?"<hr/>":"",u='<div class="step-content-name"><'+n.content_headings_element+">"+i.html()+"</"+n.content_headings_element+">"+o+"</div>";if(n.content_headings_after!=false&&s.find(n.content_headings_after).length>0)s.find(n.content_headings_after).after(u);else s.prepend(u)}})};if(n.content_height_equalize||n.steps_height_equalize||n.steps_width_percentage||n.shrink_step_names){if(n.steps_height_equalize){var h=t.find(".step-title"),p=t.get_max_height(h)}if(n.content_height_equalize){var d=t.find(".step-content");d.addClass("clearfix");var v=t.get_max_height(d)}e(window).resize(function(){if(n.steps_width_percentage){var r=100/l-1;if(e(window).width()<parseInt(n.alter_width_at_viewport))t.find(".step-title").css({width:r+"%","padding-left":"0","padding-right":"0"})}if(n.shrink_step_names){if(e(window).width()<=parseInt(n.alter_names_at_viewport)){setTimeout(function(){t.find(".step-content-name").remove();t.find(".step-name").hide();t.find(".step-order").show();t.make_step_content_headings()},200)}else{setTimeout(function(){t.find(".step-content-name").remove();if(!n.step_order)t.find(".step-order").hide();if(n.step_names)t.find(".step-name").show();if(n.content_headings)t.make_step_content_headings()},200)}}if(n.steps_height_equalize){var i=t.find(".step-title");i.css("min-height",p);i.css("min-height",t.get_max_height(i))}if(n.content_height_equalize){setTimeout(function(){var e=t.find(".step-content");e.css("min-height",v);e.css("min-height",t.get_max_height(e))},2e3)}}).resize()}t.check_progress_titles=function(){t.find(".step-content").each(function(r){var i=e(this),s="pstep"+(r+1);i.addClass(s);var o=t.find(".step-title").eq(r);o.addClass(s);var u;if(n.traverse_titles=="visited"&&o.hasClass("step-visited")||n.traverse_titles=="custom"&&o.hasClass("step-visited")||n.traverse_titles=="never"&&o.hasClass("step-visited")||n.traverse_titles=="always"){u=n.validation_rule.call(i);if(u=="warning"){o.removeClass("step-error btn-info btn-success btn-warning btn-danger step-info-error step-info-incomplete").addClass("step-warning step-info-warning");t.trigger_error(i)}else if(u=="error"){o.removeClass("step-warning btn-info btn-success btn-warning btn-danger step-info-incomplete step-info-warning").addClass("step-error step-info-error");t.trigger_error(i)}else if(u){o.removeClass("step-warning btn-info btn-warning btn-danger step-error step-info-error step-info-incomplete step-info-warning").addClass("btn-success");if(n.check_marks)o.find("i.step-mark").remove().end().prepend('<i class="icon-ok step-mark"></i> ')}else if(!u){o.removeClass("step-warning btn-info btn-success btn-danger btn-warning step-error step-info-error step-info-warning").addClass("btn-info step-info-incomplete").find("i.step-mark").remove()}}else{u=n.validation_rule.call(i);if(u=="warning"){o.removeClass("step-info-incomplete step-info-error").addClass("step-info-warning")}else if(u=="error"){o.removeClass("step-info-incomplete step-info-warning").addClass("step-info-error");t.trigger_error(i)}else if(u){o.removeClass("step-info-error step-info-incomplete step-info-warning")}else if(!u){o.removeClass("step-info-error step-info-warning").addClass("step-info-incomplete")}}});t.toggle_buttons_function();t.trigger("validation_complete.psteps")};t.toggle_buttons_function=function(){var e=o.attr("data-btn-name"),r=a.attr("data-btn-name"),s=u.attr("data-btn-name");if(e!=undefined&&e.length)o.html(e);if(r!=undefined&&r.length)a.html(r);if(s!=undefined&&s.length)u.html(s);if(t.find(".step-content").last().hasClass("step-active")){if(!o.hasClass("btn-manual"))o.hide();if(!a.hasClass("btn-manual"))a.show()}else{if(!o.hasClass("btn-manual"))o.show();if(!a.hasClass("btn-manual"))a.hide()}var l=t.find(".step-title.step-active");if(l.hasClass("btn-success")||l.hasClass("step-warning"))f.removeClass("btn-info").addClass("btn-success");else if(l.hasClass("btn-info"))f.removeClass("btn-success").addClass("btn-info");else if(l.hasClass("step-error"))f.removeClass("btn-success btn-info").addClass("btn-danger");if(n.validate_submit_all_steps){if(i.filter(".btn-info").length||i.filter(".step-error").length&&!n.ignore_errors_on_submit)a.removeClass("btn-success").addClass("btn-info")}if(n.back&&!u.hasClass("btn-manual")){if(t.find(".step-title").first().hasClass("step-active"))u.hide();else{var c=t.find(".step-title.step-active").prevAll(".step-title:first");if(c.hasClass("btn-info"))u.removeClass("btn-success btn-warning btn-danger").addClass("btn-info").css("cursor","pointer");else if(c.hasClass("btn-success"))u.removeClass("btn-info btn-warning btn-danger").addClass("btn-success").css("cursor","pointer");else if(c.hasClass("btn-warning"))u.removeClass("btn-info btn-success btn-danger").addClass("btn-warning").css("cursor","pointer");else if(c.hasClass("btn-danger"))u.removeClass("btn-success btn-warning btn-info").addClass("btn-danger").css("cursor","pointer");u.show()}}else if(!u.hasClass("btn-manual"))u.hide()};t.go_to_step=function(e){var r=t.find(".step-title.last-active"),i=t.find(".step-content.last-active"),s=t.find(".step-content.step-active"),o=t.find(".step-title.step-active");if(e>l)return;var u=t.find(".step-content").eq(e-1),a=t.find(".step-title").eq(e-1);if(t.find(".step-resume").length){t.find(".step-transition-processing").removeClass("step-transition-processing")}if(o.hasClass("step-transition")&&!t.find(".step-resume").length&&!c)n.steps_transition.call(s);if(o.hasClass("step-transition-processing")){t.find(".step-resume").removeClass("step-resume");a.addClass("step-resume");return}else t.find(".step-resume").removeClass("step-resume");if(!c)n.steps_hide.call(s);r.removeClass("last-active");i.removeClass("last-active");s.hide().removeClass("step-active").addClass("last-active");u.show().addClass("step-active step-visited");o.removeClass("step-active").addClass("disabled last-active");a.addClass("step-active step-visited").removeClass("disabled");u.prevAll(".step-content").addClass("step-visited");a.prevAll(".step-title").addClass("step-visited");if(!u.hasClass("step-loaded"))n.steps_onload.call(u);u.addClass("step-loaded");n.steps_show.call(u);if(n.traverse_titles=="visited"){a.prevAll(".step-title").andSelf().css("cursor","pointer")}if(c)c=false;else t.trigger("validate.psteps");t.toggle_buttons_function()};t.go_to_next_step=function(){var e=t.find(".step-title.step-active").prevAll(".step-title");if(n.skip_no_traverse_on_next){var r=t.find(".step-title").eq(e.length+1);if(r.hasClass("step-notraverse")){var i=r.nextAll(".step-title:not(.step-notraverse)").first().prevAll(".step-title").length+1;t.go_to_step(i)}else t.go_to_step(e.length+2)}else t.go_to_step(e.length+2)};t.go_to_prev_step=function(){var e=t.find(".step-title.step-active").prevAll(".step-title");if(n.skip_no_traverse_on_next){var r=t.find(".step-title").eq(e.length-1);if(r.hasClass("step-notraverse")){var i=r.prevAll(".step-title:not(.step-notraverse)").first().prevAll(".step-title").length+1;t.go_to_step(i)}else{t.go_to_step(e.length)}}else{t.go_to_step(e.length)}};t.change_traverse=function(r){var i=n.custom_traverse_class;var s=t.find(".step-title");t.off("click",".step-title:not(.step-notraverse)");t.off("click",".step-title.step-active:not(.step-notraverse)");t.off("click",".step-title.step-visited:not(.step-notraverse)");if(r=="always"){s.css("cursor","pointer");t.on("click",".step-title:not(.step-notraverse)",function(){var n=e(this),r=n.prevAll(".step-title");t.go_to_step(r.length+1)})}else if(r=="custom"){var o="."+i;var u=".step-title."+i+":not(.step-notraverse)";s.css("cursor","default").filter(o).css("cursor","pointer");t.on("click",u,function(){var n=e(this);if(n.prevAll(".step-title:first").hasClass("step-active"))t.go_to_next_step();else if(n.nextAll(".step-title:first").hasClass("step-active"))t.go_to_prev_step();else{var r=n.prevAll(".step-title");t.go_to_step(r.length+1)}})}else if(r=="visited"){s.css("cursor","default").filter(".step-visited").css("cursor","pointer");t.on("click",".step-title.step-visited:not(.step-notraverse)",function(){var n=e(this);if(n.prevAll(".step-title:first").hasClass("step-active"))t.go_to_next_step();else if(n.nextAll(".step-title:first").hasClass("step-active"))t.go_to_prev_step();else{var r=n.prevAll(".step-title");t.go_to_step(r.length+1)}})}else if(r=="never"){s.css("cursor","default");t.on("click",".step-title.step-active:not(.step-notraverse)",function(){var n=e(this),r=n.prevAll(".step-title");t.go_to_step(r.length+1)})}s.filter(".step-notraverse").css("cursor","default")};t.trigger_error=function(e){var r=e.prevAll(".step-content").length+1,i=t.find(".step-title").eq(r-1);if(i.hasClass("step-warning")){i.removeClass("btn-info btn-success").addClass("btn-warning");if(n.check_marks)i.find("i.step-mark").remove().end().prepend('<i class="icon-remove step-mark"></i> ')}else if(i.hasClass("step-error")){i.removeClass("btn-info btn-success").addClass("btn-danger");if(n.check_marks)i.find("i.step-mark").remove().end().prepend('<i class="icon-remove step-mark"></i> ')}};r.hide().first().addClass("step-visited step-active").show();i.addClass("disabled btn").first().addClass("step-visited step-active").removeClass("disabled");if(!n.step_names)s.hide();t.change_traverse(n.traverse_titles);t.check_progress_titles();if(n.content_headings)t.make_step_content_headings();var m;if(n.start_incomplete_step){var g=t.find(".step-title.step-info-incomplete").first();if(g.length)t.go_to_step(g.prevAll(".step-title").length+1);else{m=t.find(".step-title.btn-success").last();t.go_to_step(m.prevAll(".step-title").length+1)}}else if(n.start_warning_step){var y=t.find(".step-title.step-info-warning").first();if(y.length)t.go_to_step(y.prevAll(".step-title").length+1);else{m=t.find(".step-title.btn-success").last();t.go_to_step(m.prevAll(".step-title").length+1)}}else if(n.start_error_step){var b=t.find(".step-title.step-info-error").first();if(b.length)t.go_to_step(b.prevAll(".step-title").length+1);else{m=t.find(".step-title.btn-success").last();t.go_to_step(m.prevAll(".step-title").length+1)}}else t.go_to_step(n.step_start);u.click(function(){if(n.use_custom_back_button){var e=t.find(".step-title.step-active").prevAll(".step-title").length;n.custom_back_button_click.call(undefined,e)}else{t.go_to_prev_step()}});var w=0;t.bind("validate.psteps",function(e){if(e.timeStamp<w+500){e.preventDefault();e.stopPropagation();return}w=e.timeStamp;t.check_progress_titles()});t.bind("traverse_never.psteps",function(){t.change_traverse("never")});t.bind("traverse_always.psteps",function(){t.change_traverse("always")});t.bind("traverse_visited.psteps",function(){t.change_traverse("visited")});t.bind("traverse_custom.psteps",function(){t.change_traverse("custom")});t.bind("load_after_steps.psteps",function(){n.load_after_steps.call(t)});t.on("step_error.psteps",".step-content",function(){t.trigger_error(e(this))});t.on("go_to_step.psteps",".step-title",function(){var n=e(this),r=n.prevAll(".step-title");t.go_to_step(r.length+1)});t.bind("go_to_first_incomplete.psteps",function(){var e=t.find(".step-title.step-info-incomplete").first();if(e.length)t.go_to_step(e.prevAll(".step-title").length+1);else{m=t.find(".step-title.btn-success").last();t.go_to_step(m.prevAll(".step-title").length+1)}});t.bind("go_to_first_warning.psteps",function(){var e=t.find(".step-title.step-info-warning").first();if(e.length)t.go_to_step(e.prevAll(".step-title").length+1);else{m=t.find(".step-title.btn-success").last();t.go_to_step(m.prevAll(".step-title").length+1)}});t.bind("go_to_first_error.psteps",function(){var e=t.find(".step-title.step-info-error").first();if(e.length)t.go_to_step(e.prevAll(".step-title").length+1);else{m=t.find(".step-title.btn-success").last();t.go_to_step(m.prevAll(".step-title").length+1)}});f.click(function(r){var i=e(this);if(i.hasClass(n.btn_wait_class)){setTimeout(function(){t.trigger("validate.psteps");var s=t.find(".step-title.step-active");if(s.hasClass("step-error")&&n.validate_errors&&!n.validate_next_step){if(n.validate_use_error_msg)alert(n.validate_error_msg);else s.click()}else if(s.hasClass("step-error")&&n.validate_next_step&&!n.ignore_errors_on_next)e.noop();else if(s.hasClass("step-error")&&n.ignore_errors_on_next)t.go_to_next_step();else if(i.hasClass("btn-success"))t.go_to_next_step();else if(i.hasClass("submit-button")&&(n.validate_submit_all_steps||n.validate_next_step)){if(n.use_before_submit)alert(n.before_submit);r.preventDefault()}else if(n.validate_next_step&&n.use_before_next)alert(n.before_next);else t.go_to_next_step()},n.btn_wait_time)}else{t.trigger("validate.psteps");var s=t.find(".step-title.step-active");if(s.hasClass("step-error")&&n.validate_errors&&!n.validate_next_step){if(n.validate_use_error_msg)alert(n.validate_error_msg);else s.click()}else if(s.hasClass("step-error")&&n.validate_next_step&&!n.ignore_errors_on_next)e.noop();else if(s.hasClass("step-error")&&n.ignore_errors_on_next)t.go_to_next_step();else if(i.hasClass("btn-success"))t.go_to_next_step();else if(i.hasClass("submit-button")&&(n.validate_submit_all_steps||n.validate_next_step)){if(n.use_before_submit)alert(n.before_submit);r.preventDefault()}else if(n.validate_next_step&&n.use_before_next)alert(n.before_next);else t.go_to_next_step()}});this.pines_steps=t});return r};e.fn.psteps.defaults={traverse_titles:"never",custom_traverse_class:"custom-traverse",skip_no_traverse_on_next:true,content_headings:false,content_headings_element:"h4",content_headings_hr:true,content_headings_after:false,step_order:true,step_names:true,check_marks:true,alter_width_at_viewport:"1000",steps_width_percentage:false,steps_height_equalize:false,content_height_equalize:false,alter_names_at_viewport:"650",shrink_step_names:true,back:true,use_custom_back_button:false,custom_back_button_click:function(){},step_start:"1",steps_onload:function(){},steps_show:function(){},steps_hide:function(){},steps_transition:function(){},start_incomplete_step:false,start_warning_step:false,start_error_step:false,validation_rule:function(){return true},validate_next_step:true,validate_submit_all_steps:true,validate_errors:true,ignore_errors_on_next:false,ignore_errors_on_submit:false,validate_error_msg:"There was an error processing the step.",validate_use_error_msg:true,use_before_submit:true,before_submit:"Please complete all of the required steps before submitting.",use_before_next:true,before_next:"Please complete this step before advancing to the next step.",btn_wait_class:"btn-wait",btn_wait_time:1e3,load_after_steps:function(){}}})(jQuery)
